{% extends "layouts.master" %}

{% block title %}{{ file.project.name }} - {{ file.name }} - Edit{% endblock %}

{% block content %}
<ol class="breadcrumb">
    <li>{{ link_to_route('projects.index', 'Home') }}</li>
    <li>{{ link_to_route('projects.show', file.project.name, {project: file.project}) }}</li>
    <li>{{ link_to_route('projects.show', file.name, {project: file.project}) }}</li>
    <li class="active">Edit</li>
</ol>
{% if auth_user().can('modify-file', file) %}
<h2>Upload en.catkeys</h2>
{{ form_open({url: route('files.upload', {id: file.id}), method: POST, files: true}) }}
{{ form_file('catkeys', null) }}
{{ form_submit('Upload new') }}
{{ form_close() }}
{% endif %}
<h2>Texts</h2>
{% for context, texts in file.texts.groupBy('context') %}
<h3>{{ context }}</h3>
<table>
    {% for text in texts %}
    <tr>
        <td>{{ text.text }}</td>
        <td>{{ text.comment }}</td>
    </tr>
    {% endfor %}
</table>
{% endfor %}

{% endblock %}
